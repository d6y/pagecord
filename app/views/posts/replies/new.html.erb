<%= render "blogs/header", hide_email_form: true, hide_bio: true %>

<%= form_with model: [@post, @reply],
          url: post_replies_path_for(@post),
          method: :post,
          scope: :reply,
          class: "mt-8 space-y-6" do |form| %>

  <%= hidden_field_tag :form_token, @form_token %>
  <%= render "/shared/spam_prevention" %>

  <div class="md:flex md:space-x-4">
    <div class="md:flex-1">
      <%= form.label :name, "Your Name", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.text_field :name, class: "block w-full rounded-md border-gray-300 dark:border-slate-600 dark:bg-slate-700 ring-0 dark:text-white focus:border-slate-500 focus:ring-slate-500", required: true %>
      <% if @reply.errors[:name].any? %>
        <span class="text-red-500 text-sm"><%= @reply.errors.full_messages_for(:name).first %></span>
      <% end %>
    </div>

    <div class="md:flex-1">
      <%= form.label :email, "Your Email", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
      <%= form.email_field :email, class: "block w-full rounded-md border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white ring-0 focus:border-slate-500 focus:ring-slate-500", required: true %>
      <% if @reply.errors[:email].any? %>
        <span class="text-red-500 text-sm"><%= @reply.errors.full_messages_for(:email).first %></span>
      <% end %>
    </div>
  </div>

  <div class="md:flex-1">
    <%= form.label :subject, "Subject", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
    <%= form.text_field :subject, class: "block w-full rounded-md border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white ring-0 focus:border-slate-500 focus:ring-slate-500", required: true %>
    <% if @reply.errors[:subject].any? %>
      <span class="text-red-500 text-sm"><%= @reply.errors.full_messages_for(:subject).first %></span>
    <% end %>
  </div>

  <div>
    <%= form.label :message, "Message", class: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1" %>
    <%= form.text_area :message, rows: 6, class: "block w-full rounded-md border-gray-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white ring-0 focus:border-slate-500 focus:ring-slate-500", required: true %>
    <% if @reply.errors[:message].any? %>
      <span class="text-red-500 text-sm"><%= @reply.errors.full_messages_for(:message).first %></span>
    <% end %>
  </div>

  <div class="flex justify-end space-x-3">
    <%= link_to "Cancel", post_path(@post), class: "btn-secondary" %>
    <%= form.submit "Send Reply", class: "btn-primary" %>
  </div>
<% end %>
